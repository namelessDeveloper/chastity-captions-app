(this["webpackJsonpchastity-choice-app"]=this["webpackJsonpchastity-choice-app"]||[]).push([[0],{38:function(t,e,n){"use strict";n.r(e);var c=n(4),r=n(0),o=n.n(r),a=n(21),i=n.n(a),s=n(9),l=n(2),u=Object(r.createContext)({}),d=u.Provider,b=n(17),j=n.n(b),p=n(22);function f(){return(f=Object(p.a)(j.a.mark((function t(e,n){var c,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.github.com/gists/".concat(e));case 3:return c=t.sent,t.next=6,c.json();case 6:return r=t.sent,console.log(r),t.abrupt("return",JSON.parse(r.files[n||"cyoa.json"].content));case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function O(){var t=Object(r.useState)(null),e=Object(s.a)(t,2),n=e[0],c=e[1],o=Object(l.e)().pathname;return Object(r.useEffect)((function(){var t=o.substr(1).split("/"),e=Object(s.a)(t,2),n=e[0],r=e[1];n?function(t,e){return f.apply(this,arguments)}(n,r).then((function(t){t&&(c(t),console.log('Loaded "'.concat(null===t||void 0===t?void 0:t.title,'"')))})):c(null)}),[o]),n}var h,v,x=n(5),g=n(1),m=x.c.div(h||(h=Object(c.a)(["\n  top: 0;\n  position: sticky;\n  width: 100vw;\n  background-color: black;\n  padding: 1em;\n  border-bottom: 3px solid white;\n"]))),y=x.c.span(v||(v=Object(c.a)(["\n  color: red;\n"])));var w,k,C,S,A,T,L=function(t){var e,n=t.available;t.total;return Object(g.jsxs)(m,{children:["Available Points: ",(e=n,e>=0?e:Object(g.jsx)(y,{children:e}))]})},H="#44ca44",I="red",_=Object(x.b)(w||(w=Object(c.a)(["\n  pointer-events: none;\n  & ::before {\n    background: black;\n    mix-blend-mode: saturation;\n  }\n"]))),J=x.c.div(k||(k=Object(c.a)(["\n  ","\n  display:flex;\n  flex-direction: ",";\n  // TODO min-width\n  min-width: ","px;\n  border: 5px solid ",";\n  border-radius: 1em;\n  & img {\n    border-top-left-radius: 0.5em;\n    border-top-right-radius: 0.5em;\n  }\n  padding: 1em;\n  cursor: pointer;\n  user-select: none;\n"])),(function(t){return t.affordable?"":_}),(function(t){return t.direction}),(function(t){return t.width&&t.width}),(function(t){return t.toggled?t.toggleColor:"black"})),M=function(t){var e=t.src,n=t.width,c=void 0===n?200:n;return Object(g.jsx)("img",{src:e,style:{width:"".concat(c,"px"),height:"auto"}})};function N(t){if(t){if(t>0)return'<span style="color:'.concat(H,'">').concat(t,"</span>");if(t<0)return'<span style="color:'.concat(I,'">').concat(t,"</span>")}return t}var D,E,F,P=Object(x.b)(C||(C=Object(c.a)(["\n  width: min-content;\n"]))),B=x.c.div(S||(S=Object(c.a)(["\n  ","\n"])),(function(t){return t.noHeader?"":P})),R=x.c.h4(A||(A=Object(c.a)(["\n  white-space: nowrap;\n"]))),W=x.c.p(T||(T=Object(c.a)(["\n"]))),q=function(t){var e=t.body,n=t.header,c=t.cost;return Object(g.jsxs)(B,{noHeader:void 0==n,children:[n&&Object(g.jsx)(R,{dangerouslySetInnerHTML:{__html:"".concat(n," [").concat(N(c),"]")}}),e&&Object(g.jsx)(W,{dangerouslySetInnerHTML:{__html:e}})]})},z=x.c.div(D||(D=Object(c.a)(["\n  background-color: ",";\n  color: White;\n  font-weight: 700;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 1em;\n  border: 3px solid white;\n  border-radius: .5em;\n"])),(function(t){return t.color||"#a80eb6"})),G=function(t){var e=t.text,n=t.color;return Object(g.jsx)(z,{color:n,children:e})},K=function(t){var e=t.data,n=t.onClick,c=Object(r.useState)(!1),o=Object(s.a)(c,2),a=o[0],i=o[1];return Object(g.jsx)(J,{toggled:a,toggleColor:e.cost&&e.cost>0?H:I,onClick:function(){e.cost&&n&&(a?(n(-e.cost),i(!1)):(n(e.cost),i(!0)))},direction:e.direction||"row",width:e.width,affordable:!0,children:e.parts.map((function(t,n){switch(t.type){case"image":return Object(g.jsx)(M,{src:t.src,width:t.width},n);case"text":return Object(g.jsx)(q,{cost:e.cost,body:t.body,header:t.header},n);case"title":return Object(g.jsx)(G,{cost:e.cost,text:t.text},n);default:return null}}))})};var Q=x.c.div(F||(F=Object(c.a)(["\n  display:flex;\n  ","\n  flex-wrap: wrap;\n"])),(function(t){return function(t){if(t)return Object(x.b)(E||(E=Object(c.a)(["flex-direction: ",";"])),t)}(t.direction)}));var U=function(t){var e=t.data,n=function(){var t=Object(r.useContext)(u),e=t.setAvailable,n=(t.setTotal,t.total,t.available);return function(t){console.log(t),void 0!=n&&e&&e(n+t)}}(),c="none"!==e.type?function(t){return n(t)}:void 0;return"multiple"==e.type||"single"==e.type?Object(g.jsx)(Q,{direction:e.direction,children:e.items.map((function(t,e){return Object(g.jsx)(K,{data:t,onClick:c},e)}))}):Object(g.jsx)(Q,{direction:e.direction,children:e.items.map((function(t,e){return Object(g.jsx)(K,{data:t},e)}))})},V=function(t){var e=t.config,n=Object(r.useContext)(u),c=n.available,o=void 0===c?0:c,a=n.total,i=void 0===a?0:a;n.setAvailable,n.setTotal;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(L,{available:o,total:i}),e.sections.map((function(t,e){return Object(g.jsx)(U,{data:t},e)}))]})};var X,Y=function(){var t=O(),e=Object(r.useRef)(null),n=Object(l.d)(),c=Object(r.useState)(0),o=Object(s.a)(c,2),a=o[0],i=o[1],u=Object(r.useState)(0),b=Object(s.a)(u,2),j=b[0],p=b[1];return null!==t&&"cyoa"==t.type?Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(d,{value:{available:a,setAvailable:i,total:j,setTotal:p},children:Object(g.jsx)(V,{config:t})})}):Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)("label",{htmlFor:"",children:"Load a config from a github gist:"}),Object(g.jsx)("input",{ref:e,type:"text",placeholder:"gistID"}),Object(g.jsx)("button",{onClick:function(){var t;return n.push((null===(t=e.current)||void 0===t?void 0:t.value)||"")},children:"Load"})]})},Z=n(14),$=Object(x.a)(X||(X=Object(c.a)(["\n  body {\n    background:  black;\n    color: white;\n    font-family: sans-serif;\n  }\n"])));i.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsxs)(Z.a,{children:[Object(g.jsx)($,{}),Object(g.jsx)(Y,{})]})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.ad1de563.chunk.js.map