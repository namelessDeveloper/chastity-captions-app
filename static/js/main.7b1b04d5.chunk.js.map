{"version":3,"sources":["containers/PointContainer.tsx","containers/ProfileContainer.tsx","lib/index.ts","hooks/useGist.ts","hooks/useConstructor.ts","components/PointTracker/PointTracker.tsx","style/index.ts","components/Item/styles.ts","components/Item/components/Image.tsx","components/Item/components/Text.tsx","components/Item/components/Title.tsx","components/Item/components/Index.tsx","components/Item/Item.tsx","components/Section/Section.tsx","pages/Cyoa.tsx","pages/Landing.tsx","pages/Profile.tsx","Routing.tsx","index.tsx"],"names":["PointContext","createContext","PointContainer","children","useState","available","setAvailable","total","setTotal","Provider","value","ProfileContext","ProfileContainer","fileList","gistId","a","fetch","data","json","description","files","owner","id","console","error","useGist","status","gist","setGist","callback","firstExecution","useRef","current","useConstructor","getGist","then","catch","err","message","Tracker","styled","div","Negative","span","PointTracker","points","useContext","theme","Link","RouterLink","unaffordable","css","ItemWrapper","p","affordable","direction","width","toggled","toggleColor","Image","src","style","height","styleCost","cost","minContent","Wrapper","noHeader","H4","h4","P","Text","body","header","undefined","dangerouslySetInnerHTML","__html","StyledTitle","color","Title","text","LinkWrapper","Index","pathname","useLocation","log","map","f","key","to","filename","title","Item","onClick","setToggled","parts","part","type","SectionWrapper","flexDirection","Section","setPoints","usePoints","handleClick","items","item","Cyoa","config","Layout","sections","sect","Landing","input","history","useHistory","htmlFor","ref","placeholder","push","Profile","GameRouting","useRouteMatch","params","href","content","cyoa","JSON","parse","parseFileList","Object","entries","file","Routing","path","GlobalStyle","createGlobalStyle","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7b1b04d5.chunk.js","sourcesContent":["import { useState, createContext } from \"react\"\n\ninterface ContextProps {\n  available: number\n  setAvailable: (points: number) => void\n  \n  total: number\n  setTotal: (points: number) => void\n}\n\nexport const PointContext = createContext<Partial<ContextProps>>({})\n\nexport const PointContainer: React.FC = ({\n  children\n}) => {\n  const [available, setAvailable] = useState(0)\n  const [total, setTotal] = useState(0)\n\n  return (\n    <PointContext.Provider value={{\n      available,\n      setAvailable,\n      total, \n      setTotal,\n    }}>\n      {children}\n    </PointContext.Provider>\n  )\n}","import { createContext } from \"react\"\n\ninterface ContextProps {\n  fileList: Array<{\n    filename: string\n    title: string\n  }>\n}\n\nexport const ProfileContext = createContext<Partial<ContextProps>>({})\n\nexport const ProfileContainer: React.FC<ContextProps> = ({\n  children, fileList\n}) => (\n  <ProfileContext.Provider value={{fileList}}>\n    {children}\n  </ProfileContext.Provider>\n)","\nexport interface GistFiles {\n  [filename:string]: {\n    content: string\n    filename: string\n  }\n}\n\nexport interface GithubGist {\n  description: string\n  files: GistFiles\n  owner: {\n    login: string\n  }\n  id: string \n}\n\n\nexport async function getGist(gistId:string){\n  try {\n    const data = await fetch(`https://api.github.com/gists/${gistId}`)\n    const json: GithubGist = await data.json()\n\n    return {\n      description: json.description,\n      files: json.files,\n      owner: json.owner,\n      id: json.id\n    }\n  } catch (error) {\n    console.error(error);\n    throw error\n  }\n}","import { useState } from \"react\"\nimport { getGist, GithubGist } from \"../lib\"\nimport { useConstructor } from \"./useConstructor\"\n\ninterface Success {\n  status: \"succeeded\"\n  data: GithubGist\n}\n\ninterface Fail {\n  status: \"failed\"\n  error: {\n    message:string\n  }\n}\n\ninterface Loading {\n  status: \"loading\"\n}\n\ntype Gist =| Success | Fail | Loading\n\nexport function useGist(gistId:string): Gist{\n  const [gist, setGist] = useState<Gist>({status: \"loading\"})\n  useConstructor( () => {\n    getGist(gistId)\n      .then(gist => setGist({\n        status: \"succeeded\",\n        data: gist,\n      }))\n      .catch(err => setGist({\n        status: \"failed\",\n        error: {\n          message: err,\n        },\n      }))\n  })\n  return gist\n}","import { useRef } from \"react\";\n\nexport function useConstructor(callback = () =>  {}) {\n  const firstExecution = useRef(true)\n  if(firstExecution.current){\n    firstExecution.current = false\n    callback()\n  }\n}","import { useContext } from \"react\"\nimport styled from \"styled-components\"\nimport { PointContext } from \"../../containers\"\n\nconst Tracker = styled.div`\n  top: 0;\n  position: sticky;\n  width: 100vw;\n  background-color: black;\n  padding: 1em;\n  border-bottom: 3px solid white;\n`\n\nconst Negative = styled.span`\n  color: red;\n`\n\nfunction formatAvailable(points: number){\n  return points >= 0 ? points : <Negative>{points}</Negative>\n}\n\n\nexport const PointTracker: React.FC = ({\n\n}) => {\n  const { available = 0 } = useContext(PointContext)\n\n  return (\n    <Tracker>Available Points: {formatAvailable(available)}</Tracker>\n  )\n}","import { Link as RouterLink } from \"react-router-dom\"\nimport styled from \"styled-components\"\n\nexport const theme = {\n  plus: \"#44ca44\",\n  minus: \"red\",\n}\n\nexport const Link = styled(RouterLink)`\n  color: #1d83f7;\n  &:visited {\n    color: #9825F7;\n  }\n`","import styled, { css } from \"styled-components\"\n\nconst unaffordable = css`\n  pointer-events: none;\n  & ::before {\n    background: black;\n    mix-blend-mode: saturation;\n  }\n`\n\ninterface ItemWrapperProps {\n  direction: string\n  width?: number\n  toggled: boolean\n  toggleColor: string\n  affordable: boolean\n}\n\nexport const ItemWrapper = styled.div<ItemWrapperProps>`\n  ${p => p.affordable ? \"\" : unaffordable}\n  display:flex;\n  flex-direction: ${p => p.direction};\n  // TODO min-width\n  min-width: ${p => p.width && p.width}px;\n  border: 5px solid ${p => p.toggled ? p.toggleColor : \"black\"};\n  border-radius: 1em;\n  & img {\n    border-top-left-radius: 0.5em;\n    border-top-right-radius: 0.5em;\n  }\n  padding: 1em;\n  cursor: pointer;\n  user-select: none;\n`","export const Image: React.FC<{src:string, width?:number}> = ({src, width = 200}) => {\n\n  return (\n    <img src={src} style={{width:`${width}px`, height: \"auto\"}} />\n  )\n}","import styled, { css } from \"styled-components\"\nimport { theme } from \"../../../style\"\n\nfunction styleCost(cost?: number){\n  if(cost){\n    if(cost > 0) return `<span style=\"color:${theme.plus}\">${cost}</span>`\n    if(cost < 0) return `<span style=\"color:${theme.minus}\">${cost}</span>`\n  }\n  return cost\n}\n\nconst minContent = css`\n  width: min-content;\n`\n\nconst Wrapper = styled.div<{noHeader: boolean}>`\n  ${p => p.noHeader ? \"\" : minContent}\n`\nconst H4 = styled.h4`\n  white-space: nowrap;\n`\nconst P = styled.p`\n`\n\nexport const Text: React.FC<{body?: string, header?: string, cost?: number}> = ({\n  body,\n  header,\n  cost,\n}) => {\n\n  \n  return (\n    <Wrapper noHeader={header == undefined}>\n      {header && <H4 dangerouslySetInnerHTML={{__html: `${header} [${styleCost(cost)}]`}}/>}\n      {body && <P dangerouslySetInnerHTML={{__html: body}}/>}\n    </Wrapper>\n  )\n}","import styled from \"styled-components\"\n\ninterface StyledProps {\n  color?: string\n}\n\nconst StyledTitle = styled.div<StyledProps>`\n  background-color: ${p => p.color || \"#a80eb6\"};\n  color: White;\n  font-weight: 700;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 1em;\n  border: 3px solid white;\n  border-radius: .5em;\n`\n\ninterface TitleProps extends StyledProps{\n  text:string\n  cost?: number\n}\n\nexport const Title: React.FC<TitleProps> = ({\n  text, color\n}) => {\n\n  return (\n    <StyledTitle color={color}>{text}</StyledTitle>\n  )\n}","import React, { useContext } from \"react\"\nimport { useLocation } from \"react-router-dom\"\nimport styled from \"styled-components\"\nimport { ProfileContext } from \"../../../containers\"\nimport { Link } from \"../../../style\"\n\nconst LinkWrapper = styled.div`\n  padding-bottom: .5em;\n  font-size: 1.3em;\n`\n\ninterface Props {\n\n}\n\nexport const Index: React.FC<Props> = ({}) => {\n  const {fileList} = useContext(ProfileContext)\n  const {pathname} = useLocation()  \n\n  if(fileList == undefined){\n    console.error(\"item type: index can only be used on the profile\");\n    return null\n  }\n  \n  console.log(fileList);\n  \n\n  return (\n    <>\n      <h2>CYOAs by this Author:</h2>\n      {fileList.map((f, key) => (\n        <LinkWrapper key={key}>\n          <Link to={`${pathname}/${f.filename}`}>\n            {f.title}\n          </Link>\n        </LinkWrapper>\n      ))}\n    </>\n  )\n}","import React, { useState } from \"react\"\nimport { theme } from \"../../style\"\nimport { Item as ItemInterface } from \"../../types\"\nimport { ItemWrapper } from \"./styles\"\n\nimport {\n  Image, Text, Title\n} from './components'\nimport { Index } from \"./components/Index\"\n\ninterface Props {\n  data:ItemInterface,\n  onClick?:(cost:number)=>void,\n}\n\nexport const Item: React.FC<Props> = ({\n  data,\n  onClick,\n}) => {\n\n  const [toggled, setToggled] = useState(false)\n\n  function handleClick(){\n    if(data.cost && onClick){\n      if(!toggled){\n        onClick(data.cost)\n        setToggled(true)\n      } else {\n        onClick(-data.cost)\n        setToggled(false)\n      }\n    }\n  }\n\n  return (\n    <ItemWrapper\n      toggled={toggled}\n      toggleColor={data.cost && data.cost > 0 ? theme.plus : theme.minus}\n      onClick={handleClick}\n      direction={data.direction || \"row\"}\n      width={data.width}\n      affordable={true} // TODO context points\n    >\n\n      {data.parts.map((part, key) => {\n        switch (part.type) {\n          case \"image\": return <Image key={key} src={part.src} width={part.width}/>    \n          case \"text\": return <Text key={key} cost={data.cost} body={part.body} header={part.header}/>\n          case \"title\": return <Title key={key} cost={data.cost} text={part.text} />\n          case \"index\": return <Index key={key} />\n          default: return null\n        }\n      })}\n    </ItemWrapper>\n  )\n}","import React, { useContext } from \"react\"\nimport styled, { css } from \"styled-components\"\nimport { Direction, Section as SectionType } from \"../../types\"\n\nimport {Item} from '../'\nimport { PointContext } from \"../../containers/PointContainer\"\n\nfunction flexDirection(direction?: Direction){\n  if(direction){\n    return css`flex-direction: ${direction};`\n  }\n}\n\nconst SectionWrapper = styled.div<{direction?: Direction}>`\n  display:flex;\n  ${p => flexDirection(p.direction)}\n  flex-wrap: wrap;\n`\n\ninterface Props {\n  data:SectionType\n}\n\nfunction usePoints(){\n  const {setAvailable, available} = useContext(PointContext)\n\n  return function setPoints(cost:number){\n    console.log(cost);\n    if(available != undefined && setAvailable){\n      setAvailable(available + cost)\n    }\n  }\n}\n\n\nexport const Section: React.FC<Props> = ({data}) => {\n\n  const setPoints = usePoints()\n\n  const handleClick = data.type !== \"none\" \n    ? (cost:number) => setPoints(cost)\n    : undefined\n\n  if(data.type == \"multiple\"){\n    return (\n      <SectionWrapper direction={data.direction}>\n        {data.items.map((item, key) => \n          <Item key={key} data={item} onClick={handleClick}/>\n        )}\n      </SectionWrapper>\n    )\n  }\n\n  if(data.type == \"single\"){\n    return (\n      <SectionWrapper direction={data.direction}>\n        {data.items.map((item, key) => \n          <Item key={key} data={item} onClick={handleClick}/>\n        )}\n      </SectionWrapper>\n    )\n  }\n\n  return (\n    <SectionWrapper direction={data.direction}>\n      {data.items.map((item, key) => \n        <Item key={key} data={item}/>\n      )}\n    </SectionWrapper>\n  )\n}","import React from \"react\"\nimport { PointTracker } from \"../components/PointTracker\"\nimport { Config, Direction } from \"../types\"\nimport {Section} from '../components'\nimport styled from \"styled-components\"\n\ninterface Props {\n  config: Config\n}\n\nexport const Cyoa: React.FC<Props> = ({\n  config,\n}) => (\n  <>\n    <PointTracker/>\n    <Layout direction={config?.direction || \"column\"}>\n      {config.sections.map((sect, key) => \n        <Section data={sect} key={key}/>\n      )}\n    </Layout>\n  </>\n)\n\nconst Layout = styled.div<{direction: Direction}>`\n  display: flex;\n  flex-direction: ${p => p.direction};\n`","import { useRef } from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport { useDevCyoa } from \"../hooks\"\n\nexport const Landing: React.FC = ({}) => {\n  const input = useRef<HTMLInputElement>(null)\n  useDevCyoa(input)\n  const history = useHistory()\n  return (\n    <div>\n      <label htmlFor=\"\">Load a config from a github gist:</label>\n      <input ref={input} type=\"text\" placeholder=\"gistID\"/>\n      <button onClick={() => history.push(input.current?.value || \"\")}>Load</button>\n    </div>\n  )\n}","import React from \"react\"\nimport { Config, Direction } from \"../types\"\nimport {Section} from '../components'\nimport styled from \"styled-components\"\n\ninterface Props {\n  config: Config\n}\n\nexport const Profile: React.FC<Props> = ({\n  config,\n}) => (\n  <Layout direction={config?.direction || \"column\"}>\n    {config.sections.map((sect, key) => \n      <Section data={sect} key={key}/>\n    )}\n  </Layout>\n)\n\nconst Layout = styled.div<{direction: Direction}>`\n  display: flex;\n  flex-direction: ${p => p.direction};\n`","import React from \"react\"\nimport { Route, Switch, useRouteMatch } from \"react-router-dom\"\nimport { PointContainer, ProfileContainer } from \"./containers\"\nimport { useGist } from \"./hooks\"\nimport { GistFiles } from \"./lib\"\nimport { Cyoa, Profile, Landing } from \"./pages\"\nimport { Config } from \"./types\"\n\nconst Routing: React.FC = () =>  (\n  <Switch>\n    <Route path={`/:gistId/:filename?`}>\n      <GameRouting/>\n    </Route>\n    <Route path={`/`}>\n      <Landing/>\n    </Route>\n  </Switch>\n)\n\ntype GameRoutingParams = {\n  gistId: string\n  filename?: string\n}\n\n\nconst GameRouting: React.FC = () => {\n  const {params:{gistId, filename}} = useRouteMatch<GameRoutingParams>()\n  // TODO cache gist, in case user wants to view another cyoa by the same user or view their profile\n  // Thus also parse all json once on profile, if on other pages just load their (anche cache/memoize in both cases)\n  const config = useGist(gistId) \n\n  switch (config.status) {\n    default: return (\n      <div>Loading</div>\n    )\n\n    case \"failed\": return (\n      <div>\n        <h3>Invalid cyoa format.</h3>\n        <p>\n          Make sure its a valid json, use this\n          <a href=\"https://jsonformatter.curiousconcept.com/\"> validator </a>\n          first for incorect json syntax then consult the docs and/or examples for CYOA Viewer issues.\n        </p>\n      </div>\n    )\n\n    case \"succeeded\": {\n      if(filename && filename !== \"_index.json\"){\n        const {content} = config.data.files[filename]\n        const cyoa: Config = JSON.parse(content)\n        console.log(`Loaded file: ${filename}.\\nLoaded cyoa with title: \"${cyoa.title}\"`);\n        return (\n          <PointContainer>\n            <Cyoa config={cyoa} />\n          </PointContainer>\n        )\n      }\n\n      const {content} = config.data.files[\"_index.json\"]\n\n\n      const cyoa: Config = JSON.parse(content)\n      console.log(`Loaded file: ${filename}.\\nUser Profile Loaded`);\n      console.log(cyoa);\n      return (\n        <ProfileContainer fileList={parseFileList(config.data.files)}>\n          <Profile config={cyoa} />\n        </ProfileContainer>\n      )\n    }\n  }\n}\n\nfunction parseFileList(files: GistFiles){\n  const fileList = []\n  for (const [filename, file] of Object.entries(files)) {\n    if(filename != \"_index.json\"){\n      fileList.push({\n        filename,\n        title: JSON.parse(file.content).title\n      })\n    }\n  }\n  return fileList\n}\n\nexport default Routing","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import App from './App';\nimport Routing from './Routing'\n\nimport {HashRouter} from 'react-router-dom'\nimport { createGlobalStyle } from 'styled-components';\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    background:  black;\n    color: white;\n    font-family: sans-serif;\n  }\n`\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <GlobalStyle/>\n      <Routing/>\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}