(this["webpackJsonpchastity-choice-app"]=this["webpackJsonpchastity-choice-app"]||[]).push([[0],{38:function(t,e,n){"use strict";n.r(e);var c=n(4),r=n(0),o=n.n(r),a=n(21),i=n.n(a),s=n(9),l=n(2),u=Object(r.createContext)({}),d=u.Provider,b=n(17),j=n.n(b),f=n(22);function p(){return(p=Object(f.a)(j.a.mark((function t(e,n){var c,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.github.com/gists/".concat(e));case 3:return c=t.sent,t.next=6,c.json();case 6:return r=t.sent,console.log(r),t.abrupt("return",JSON.parse(r.files[n||"cyoa.json"].content));case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function O(){var t=Object(r.useState)(null),e=Object(s.a)(t,2),n=e[0],c=e[1],o=Object(l.e)().pathname;return Object(r.useEffect)((function(){var t=o.substr(1).split("/"),e=Object(s.a)(t,2),n=e[0],r=e[1];n?function(t,e){return p.apply(this,arguments)}(n,r).then((function(t){t&&(c(t),console.log('Loaded "'.concat(null===t||void 0===t?void 0:t.title,'"')))})):c(null)}),[o]),n}var h,v,x,g,m,y,w,k=n(5),C=n(1),S=k.c.div(h||(h=Object(c.a)(["\n  position: sticky;\n  width: 100vw;\n"]))),A=function(t){var e=t.available;t.total;return Object(C.jsxs)(S,{children:["Available Points: ",e]})},T="#44ca44",L="red",H=Object(k.b)(v||(v=Object(c.a)(["\n  pointer-events: none;\n  & ::before {\n    background: black;\n    mix-blend-mode: saturation;\n  }\n"]))),I=k.c.div(x||(x=Object(c.a)(["\n  ","\n  display:flex;\n  flex-direction: ",";\n  // TODO min-width\n  min-width: ","px;\n  border: 5px solid ",";\n  border-radius: 1em;\n  & img {\n    border-top-left-radius: 0.5em;\n    border-top-right-radius: 0.5em;\n  }\n  padding: 1em;\n  cursor: pointer;\n  user-select: none;\n"])),(function(t){return t.affordable?"":H}),(function(t){return t.direction}),(function(t){return t.width&&t.width}),(function(t){return t.toggled?t.toggleColor:"black"})),_=function(t){var e=t.src,n=t.width,c=void 0===n?200:n;return Object(C.jsx)("img",{src:e,style:{width:"".concat(c,"px"),height:"auto"}})};function J(t){if(t){if(t>0)return'<span style="color:'.concat(T,'">').concat(t,"</span>");if(t<0)return'<span style="color:'.concat(L,'">').concat(t,"</span>")}return t}var M,N,D,E=Object(k.b)(g||(g=Object(c.a)(["\n  width: min-content;\n"]))),F=k.c.div(m||(m=Object(c.a)(["\n  ","\n"])),(function(t){return t.noHeader?"":E})),P=k.c.h4(y||(y=Object(c.a)(["\n  white-space: nowrap;\n"]))),B=k.c.p(w||(w=Object(c.a)(["\n"]))),R=function(t){var e=t.body,n=t.header,c=t.cost;return Object(C.jsxs)(F,{noHeader:void 0==n,children:[n&&Object(C.jsx)(P,{dangerouslySetInnerHTML:{__html:"".concat(n," [").concat(J(c),"]")}}),e&&Object(C.jsx)(B,{dangerouslySetInnerHTML:{__html:e}})]})},W=k.c.div(M||(M=Object(c.a)(["\n  background-color: ",";\n  color: White;\n  font-weight: 700;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 1em;\n  border: 3px solid white;\n  border-radius: .5em;\n"])),(function(t){return t.color||"#a80eb6"})),q=function(t){var e=t.text,n=t.color;return Object(C.jsx)(W,{color:n,children:e})},z=function(t){var e=t.data,n=t.onClick,c=Object(r.useState)(!1),o=Object(s.a)(c,2),a=o[0],i=o[1];return Object(C.jsx)(I,{toggled:a,toggleColor:e.cost&&e.cost>0?T:L,onClick:function(){e.cost&&n&&(a?(n(-e.cost),i(!1)):(n(e.cost),i(!0)))},direction:e.direction||"row",width:e.width,affordable:!0,children:e.parts.map((function(t,n){switch(t.type){case"image":return Object(C.jsx)(_,{src:t.src,width:t.width},n);case"text":return Object(C.jsx)(R,{cost:e.cost,body:t.body,header:t.header},n);case"title":return Object(C.jsx)(q,{cost:e.cost,text:t.text},n);default:return null}}))})};var G=k.c.div(D||(D=Object(c.a)(["\n  display:flex;\n  ","\n  flex-wrap: wrap;\n"])),(function(t){return function(t){if(t)return Object(k.b)(N||(N=Object(c.a)(["flex-direction: ",";"])),t)}(t.direction)}));var K=function(t){var e=t.data,n=function(){var t=Object(r.useContext)(u),e=t.setAvailable,n=(t.setTotal,t.total,t.available);return function(t){console.log(t),void 0!=n&&e&&e(n+t)}}(),c="none"!==e.type?function(t){return n(t)}:void 0;return"multiple"==e.type||"single"==e.type?Object(C.jsx)(G,{direction:e.direction,children:e.items.map((function(t,e){return Object(C.jsx)(z,{data:t,onClick:c},e)}))}):Object(C.jsx)(G,{direction:e.direction,children:e.items.map((function(t,e){return Object(C.jsx)(z,{data:t},e)}))})},Q=function(t){var e=t.config,n=Object(r.useContext)(u),c=n.available,o=void 0===c?0:c,a=n.total,i=void 0===a?0:a;n.setAvailable,n.setTotal;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(A,{available:o,total:i}),e.sections.map((function(t,e){return Object(C.jsx)(K,{data:t},e)}))]})};var U,V=function(){var t=O(),e=Object(r.useRef)(null),n=Object(l.d)(),c=Object(r.useState)(0),o=Object(s.a)(c,2),a=o[0],i=o[1],u=Object(r.useState)(0),b=Object(s.a)(u,2),j=b[0],f=b[1];return null!==t&&"cyoa"==t.type?Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(d,{value:{available:a,setAvailable:i,total:j,setTotal:f},children:Object(C.jsx)(Q,{config:t})})}):Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)("label",{htmlFor:"",children:"Load a config from a github gist:"}),Object(C.jsx)("input",{ref:e,type:"text",placeholder:"gistID"}),Object(C.jsx)("button",{onClick:function(){var t;return n.push((null===(t=e.current)||void 0===t?void 0:t.value)||"")},children:"Load"})]})},X=n(14),Y=Object(k.a)(U||(U=Object(c.a)(["\n  body {\n    background:  black;\n    color: white;\n    font-family: sans-serif;\n  }\n"])));i.a.render(Object(C.jsx)(o.a.StrictMode,{children:Object(C.jsxs)(X.a,{children:[Object(C.jsx)(Y,{}),Object(C.jsx)(V,{})]})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.b3a54986.chunk.js.map